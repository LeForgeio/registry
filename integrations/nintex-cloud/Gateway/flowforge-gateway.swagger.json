{
  "swagger": "2.0",
  "info": {
    "title": "FlowForge Gateway",
    "description": "Universal gateway to all FlowForge plugins. Dynamically select any installed plugin and execute any of its actions. Supports Crypto, Math, LLM, Vector, and custom plugins.",
    "version": "1.0.0",
    "contact": {
      "name": "FlowForge Support",
      "url": "https://flowforge.dev"
    },
    "x-ntx-render-version": 2
  },
  "host": "{{FLOWFORGE_HOST}}",
  "basePath": "/api/v1",
  "schemes": ["https"],
  "consumes": ["application/json"],
  "produces": ["application/json"],
  "securityDefinitions": {
    "apiKey": {
      "type": "apiKey",
      "in": "header",
      "name": "X-API-Key",
      "description": "FlowForge API Key for authentication"
    }
  },
  "security": [{ "apiKey": [] }],
  "paths": {
    "/nintex/plugins": {
      "get": {
        "operationId": "listPlugins",
        "summary": "List Available Plugins",
        "x-ntx-visibility": "internal",
        "description": "Returns list of installed and running plugins for dynamic dropdown population.",
        "responses": {
          "200": {
            "description": "List of plugins",
            "schema": {
              "type": "object",
              "properties": {
                "plugins": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "value": {
                        "type": "string",
                        "description": "Plugin ID"
                      },
                      "name": {
                        "type": "string",
                        "description": "Display name"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/nintex/plugins/{pluginId}/actions": {
      "get": {
        "operationId": "listPluginActions",
        "summary": "List Plugin Actions",
        "x-ntx-visibility": "internal",
        "description": "Returns available actions for a specific plugin for dynamic dropdown population.",
        "parameters": [
          {
            "name": "pluginId",
            "in": "path",
            "required": true,
            "type": "string",
            "description": "Plugin identifier"
          }
        ],
        "responses": {
          "200": {
            "description": "List of actions",
            "schema": {
              "type": "object",
              "properties": {
                "actions": {
                  "type": "array",
                  "items": {
                    "type": "object",
                    "properties": {
                      "value": {
                        "type": "string",
                        "description": "Action ID"
                      },
                      "name": {
                        "type": "string",
                        "description": "Action display name"
                      }
                    }
                  }
                }
              }
            }
          }
        }
      }
    },
    "/nintex/plugins/{pluginId}/actions/{actionId}/schema": {
      "get": {
        "operationId": "getActionSchema",
        "summary": "Get Action Schema",
        "x-ntx-visibility": "internal",
        "description": "Returns JSON schema for an action's input parameters for dynamic form generation.",
        "parameters": [
          {
            "name": "pluginId",
            "in": "path",
            "required": true,
            "type": "string"
          },
          {
            "name": "actionId",
            "in": "path",
            "required": true,
            "type": "string"
          }
        ],
        "responses": {
          "200": {
            "description": "JSON Schema for action parameters",
            "schema": {
              "type": "object",
              "additionalProperties": true
            }
          }
        }
      }
    },
    "/nintex/execute": {
      "post": {
        "operationId": "executePluginAction",
        "summary": "Execute Plugin Action",
        "x-ntx-summary": "Run FlowForge Action",
        "description": "Execute any action from any installed FlowForge plugin. Select the plugin and action dynamically, then provide the required parameters.",
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "schema": {
              "type": "object",
              "required": ["plugin", "action"],
              "properties": {
                "plugin": {
                  "type": "string",
                  "title": "Plugin",
                  "x-ntx-summary": "Plugin",
                  "description": "Select a FlowForge plugin",
                  "x-ntx-dynamic-values": {
                    "operationId": "listPlugins",
                    "value-collection": "plugins",
                    "value-path": "value",
                    "value-title": "name"
                  }
                },
                "action": {
                  "type": "string",
                  "title": "Action",
                  "x-ntx-summary": "Action",
                  "description": "Select an action to execute",
                  "x-ntx-dynamic-values": {
                    "operationId": "listPluginActions",
                    "parameters": {
                      "pluginId": {
                        "parameter": "plugin"
                      }
                    },
                    "value-collection": "actions",
                    "value-path": "value",
                    "value-title": "name"
                  }
                },
                "parameters": {
                  "type": "object",
                  "title": "Parameters",
                  "x-ntx-summary": "Input",
                  "description": "Action input parameters (JSON object)",
                  "x-ntx-dynamic-schema": {
                    "operationId": "getActionSchema",
                    "parameters": {
                      "pluginId": {
                        "parameter": "plugin"
                      },
                      "actionId": {
                        "parameter": "action"
                      }
                    },
                    "value-path": "schema"
                  },
                  "additionalProperties": true
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Action executed successfully",
            "schema": {
              "type": "object",
              "properties": {
                "success": {
                  "type": "boolean",
                  "title": "Success",
                  "description": "Whether the action completed successfully"
                },
                "result": {
                  "type": "object",
                  "title": "Result",
                  "description": "Action result data",
                  "additionalProperties": true
                },
                "plugin": {
                  "type": "string",
                  "title": "Plugin",
                  "description": "Plugin that was executed"
                },
                "action": {
                  "type": "string",
                  "title": "Action",
                  "description": "Action that was executed"
                },
                "executionTime": {
                  "type": "number",
                  "title": "Execution Time (ms)",
                  "description": "Time taken to execute in milliseconds"
                }
              }
            }
          },
          "400": {
            "description": "Invalid request",
            "schema": {
              "type": "object",
              "properties": {
                "error": {
                  "type": "string"
                },
                "details": {
                  "type": "string"
                }
              }
            }
          },
          "404": {
            "description": "Plugin or action not found"
          }
        }
      }
    },
    "/plugins": {
      "get": {
        "operationId": "getInstalledPlugins",
        "summary": "Get Installed Plugins",
        "x-ntx-summary": "List Plugins",
        "description": "Get a list of all installed FlowForge plugins with their status and capabilities.",
        "responses": {
          "200": {
            "description": "List of installed plugins",
            "schema": {
              "type": "object",
              "properties": {
                "plugins": {
                  "type": "array",
                  "title": "Plugins",
                  "items": {
                    "type": "object",
                    "properties": {
                      "id": {
                        "type": "string",
                        "title": "ID"
                      },
                      "name": {
                        "type": "string",
                        "title": "Name"
                      },
                      "version": {
                        "type": "string",
                        "title": "Version"
                      },
                      "status": {
                        "type": "string",
                        "title": "Status"
                      },
                      "category": {
                        "type": "string",
                        "title": "Category"
                      },
                      "description": {
                        "type": "string",
                        "title": "Description"
                      }
                    }
                  }
                },
                "count": {
                  "type": "integer",
                  "title": "Total Count"
                }
              }
            }
          }
        }
      }
    },
    "/plugins/{pluginId}/manifest": {
      "get": {
        "operationId": "getPluginManifest",
        "summary": "Get Plugin Manifest",
        "x-ntx-summary": "Plugin Details",
        "description": "Get detailed manifest/configuration for a specific plugin including all available exports and endpoints.",
        "parameters": [
          {
            "name": "pluginId",
            "in": "path",
            "required": true,
            "type": "string",
            "title": "Plugin ID",
            "x-ntx-summary": "Plugin",
            "description": "The plugin identifier",
            "x-ntx-dynamic-values": {
              "operationId": "listPlugins",
              "value-collection": "plugins",
              "value-path": "value",
              "value-title": "name"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Plugin manifest",
            "schema": {
              "type": "object",
              "properties": {
                "id": {
                  "type": "string",
                  "title": "ID"
                },
                "name": {
                  "type": "string",
                  "title": "Name"
                },
                "version": {
                  "type": "string",
                  "title": "Version"
                },
                "description": {
                  "type": "string",
                  "title": "Description"
                },
                "exports": {
                  "type": "array",
                  "title": "Available Functions",
                  "items": {
                    "type": "object"
                  }
                },
                "endpoints": {
                  "type": "array",
                  "title": "API Endpoints",
                  "items": {
                    "type": "object"
                  }
                }
              }
            }
          }
        }
      }
    },
    "/health": {
      "get": {
        "operationId": "healthCheck",
        "summary": "Health Check",
        "x-ntx-visibility": "internal",
        "description": "Check if the FlowForge Gateway is healthy",
        "security": [],
        "responses": {
          "200": {
            "description": "Service is healthy",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "type": "string"
                },
                "version": {
                  "type": "string"
                },
                "plugins": {
                  "type": "integer",
                  "description": "Number of active plugins"
                }
              }
            }
          }
        }
      }
    }
  },
  "definitions": {}
}
